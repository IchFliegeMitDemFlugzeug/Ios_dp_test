<!DOCTYPE html> <!-- Объявляем тип документа: HTML5 -->
<html lang="ru"> <!-- Указываем язык страницы: русский -->
<head> <!-- Начало блока "голова" (метаданные, стили, заголовок) -->
  <meta charset="UTF-8"> <!-- Кодировка UTF-8, чтобы корректно отображались русские символы -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Адаптация под экран телефона -->
  <title>Перевод в Сбер</title> <!-- Заголовок вкладки браузера -->
  <style> /* Начало CSS-стилей страницы */
    body { /* Стили для всей страницы */
      font-family: Arial, sans-serif; /* Простой читаемый шрифт */
      margin: 0; /* Убираем внешние отступы */
      padding: 0; /* Убираем внутренние отступы */
      display: flex; /* Включаем flex-раскладку */
      align-items: center; /* Выравниваем по вертикали по центру */
      justify-content: center; /* Выравниваем по горизонтали по центру */
      height: 100vh; /* Высота страницы = высота окна браузера */
      background: #f5f5f5; /* Светло-серый фон */
    }

    .card { /* Контейнер "карточка", чтобы красиво смотрелось */
      background: white; /* Белый фон карточки */
      padding: 24px; /* Внутренние отступы */
      border-radius: 16px; /* Скругление углов */
      box-shadow: 0 6px 18px rgba(0,0,0,0.12); /* Лёгкая тень */
      width: min(420px, 92vw); /* Ширина: не больше 420px, но на телефоне почти во всю ширину */
      text-align: center; /* Текст по центру */
    }

    h1 { /* Заголовок */
      margin: 0 0 10px 0; /* Отступы: снизу 10px, сверху 0 */
      font-size: 20px; /* Размер шрифта */
    }

    p { /* Описание */
      margin: 0 0 18px 0; /* Отступ снизу */
      color: #444; /* Тёмно-серый цвет текста */
      font-size: 14px; /* Размер шрифта */
      line-height: 1.4; /* Межстрочный интервал */
    }

    button { /* Стили кнопки */
      width: 100%; /* Кнопка на всю ширину карточки */
      padding: 14px 16px; /* Внутренние отступы кнопки */
      border: none; /* Убираем рамку */
      border-radius: 12px; /* Скругление углов */
      font-size: 16px; /* Размер текста на кнопке */
      cursor: pointer; /* Курсор-рука при наведении */
      background: #21a038; /* Зелёный (условно "сберовский" по ощущению) */
      color: white; /* Белый текст */
    }

    button:active { /* Эффект при нажатии */
      transform: scale(0.99); /* Лёгкое "вдавливание" */
    }

    code { /* Оформление блока с примером ссылки */
      display: block; /* Отдельной строкой */
      background: #f1f1f1; /* Светлый фон */
      padding: 10px; /* Отступы */
      border-radius: 10px; /* Скругление */
      text-align: left; /* Текст слева (удобнее читать URL) */
      overflow-x: auto; /* Горизонтальная прокрутка, если URL длинный */
      font-size: 12px; /* Мелкий шрифт */
      margin-top: 14px; /* Отступ сверху */
      white-space: pre; /* Сохраняем пробелы/переносы как есть */
    }
  </style> <!-- Конец CSS -->
</head> <!-- Конец head -->
<body> <!-- Начало тела страницы -->
  <div class="card"> <!-- Карточка-контейнер -->
    <h1>Перевод в Сбер</h1> <!-- Заголовок -->
    <p>Нажми кнопку — попробуем открыть приложение СберБанк Онлайн по диплинку.</p> <!-- Пояснение -->

    <button id="payBtn">Открыть СберБанк Онлайн</button> <!-- Кнопка, по нажатию запустим диплинк -->

    <code id="dbg"></code> <!-- Блок, где покажем фактический URL (для проверки) -->
  </div>

  <script>
    // -----------------------------
    // 1) СЮДА ТЫ ПОДСТАВИШЬ СВОИ ЗНАЧЕНИЯ
    // -----------------------------

    const phoneNumber = "79160794459"; // <-- Сюда подставь номер в формате 79XXXXXXXXX (без +, пробелов и дефисов)
    const externalSource = " "; // <-- Сюда подставь трекинг-строку (в любом нужном тебе формате)

    // -----------------------------
    // 2) СОБИРАЕМ ДИПЛИНК ДЛЯ iOS
    // -----------------------------

    // Базовый диплинк (с теми же параметрами, что ты указал)
    const deepLinkBase = "sberbankonline://payments/p2p-by-phone-number"; // <-- Схема + путь, который понимает приложение

    // Важно: значения в URL лучше кодировать, чтобы спецсимволы не ломали ссылку
    const deepLink =
      deepLinkBase + // "sberbankonline://payments/p2p-by-phone-number"
      "?source=QR_FROM_SELF_EMPLOYED_EXTERNAL" + // Параметр "источник" — фиксированное значение сценария
      "&phoneNumber=" + encodeURIComponent(phoneNumber) + // Номер телефона (кодируем на всякий случай)
      "&external_source=" + encodeURIComponent(externalSource); // Трекинг-строка (тоже кодируем)

    // Покажем диплинк на странице, чтобы ты мог визуально проверить, что он собрался правильно
    document.getElementById("dbg").textContent = deepLink;

    // -----------------------------
    // 3) КЛИК ПО КНОПКЕ -> ПЫТАЕМСЯ ОТКРЫТЬ ПРИЛОЖЕНИЕ
    // -----------------------------

    document.getElementById("payBtn").addEventListener("click", () => {
      // Ставим location.href на диплинк.
      // На iOS это должно вызвать попытку открыть приложение,
      // если схема sberbankonline:// зарегистрирована установленным приложением.
      window.location.href = deepLink;
    });
  </script>
</body>
</html>
